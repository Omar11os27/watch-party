<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Watch Party - ูุดุงูุฏุฉ ูุชุฒุงููุฉ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app" class="app">
        <!-- Username Modal -->
        <div id="username-modal" class="modal">
            <div class="modal-content modal-small">
                <div class="modal-header">
                    <h2 class="modal-title">ุงูุงูุถูุงู ุฅูู ุงูุบุฑูุฉ</h2>
                </div>
                <div class="modal-body">
                    <p class="modal-desc">ุฃุฏุฎู ุงุณูู ููุงูุถูุงู ุฅูู "<span id="room-name-display"></span>"</p>
                    <input 
                        type="text" 
                        id="username-input" 
                        class="form-input" 
                        placeholder="ุฃุฏุฎู ุงุณูู..."
                        autofocus
                    >
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary btn-block" onclick="joinRoom()">
                        ุงูุงูุถูุงู
                    </button>
                </div>
            </div>
        </div>

        <!-- Header -->
        <header class="header">
            <div class="container">
                <div class="header-content">
                    <button class="btn-back" onclick="goHome()">
                        <span>โ</span>
                    </button>
                    <div class="room-info-header">
                        <h1 class="room-title-header" id="room-name-main"></h1>
                        <div class="room-meta">
                            <span class="room-users-count" id="users-count">
                                <span class="users-icon">๐ฅ</span>
                                <span class="users-number">1</span>
                            </span>
                            <span class="room-host" id="room-host"></span>
                        </div>
                    </div>
                    <button class="btn-share" onclick="shareRoom()">
                        <span class="share-icon">๐</span>
                        <span class="share-text">ูุดุงุฑูุฉ</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <div class="container">
                <div class="room-layout">
                    <!-- Video Section -->
                    <div class="video-section">
                        <div class="video-container">
                            <video 
                                id="video-player" 
                                class="video-player"
                                crossOrigin="anonymous"
                                playsinline
                            >
                                <track 
                                    id="subtitle-track" 
                                    kind="subtitles" 
                                    srclang="ar" 
                                    label="ุงูุนุฑุจูุฉ"
                                    default
                                >
                            </video>
                            
                            <!-- Video Controls Overlay -->
                            <div class="video-controls">
                                <!-- Progress Bar -->
                                <div class="progress-container" onclick="seekToPosition(event)">
                                    <div class="progress-bar">
                                        <div class="progress-filled" id="progress-filled"></div>
                                    </div>
                                    <div class="progress-handle" id="progress-handle"></div>
                                </div>
                                <div class="time-display">
                                    <span id="current-time">0:00</span>
                                    <span>/</span>
                                    <span id="duration">0:00</span>
                                </div>
                                </div>

                                <!-- Control Buttons -->
                                <div class="control-buttons">
                                    <!-- Left Group -->
                                    <div class="control-group control-group-left">
                                        <button class="btn-control" onclick="skip(-10)" title="ุชุฑุฌูุน 10 ุซูุงูู">
                                            <span>โช</span>
                                        </button>
                                        <button class="btn-control btn-play-pause" id="btn-play-pause" onclick="togglePlay()">
                                            <span id="play-icon" class="hidden">โถ</span>
                                            <span id="pause-icon">โธ</span>
                                        </button>
                                        <button class="btn-control" onclick="skip(10)" title="ุชูุฏูู 10 ุซูุงูู">
                                            <span>โฉ</span>
                                        </button>
                                    </div>

                                    <!-- Center Group (Time) -->
                                    <div class="time-display-mobile">
                                        <span id="current-time-mobile">0:00</span>
                                        <span>/</span>
                                        <span id="duration-mobile">0:00</span>
                                    </div>

                                    <!-- Right Group -->
                                    <div class="control-group control-group-right">
                                        <!-- Speed Control -->
                                        <div class="speed-control">
                                            <span class="speed-label">ุงูุณุฑุนุฉ:</span>
                                            <div class="speed-buttons">
                                                <button class="btn-speed" data-speed="0.5" onclick="setSpeed(0.5)">0.5x</button>
                                                <button class="btn-speed" data-speed="1" onclick="setSpeed(1)">1x</button>
                                                <button class="btn-speed" data-speed="1.5" onclick="setSpeed(1.5)">1.5x</button>
                                                <button class="btn-speed" data-speed="2" onclick="setSpeed(2)">2x</button>
                                            </div>
                                        </div>

                                        <button class="btn-control" onclick="toggleFullscreen()" title="ููุก ุงูุดุงุดุฉ">
                                            <span>โถ</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Room Info Card -->
                        <div class="room-info-card">
                            <div class="info-item">
                                <span class="info-label">ุฑุงุจุท ุงูููุฏูู:</span>
                                <span class="info-value" id="video-url-display"></span>
                            </div>
                            <div class="info-item info-item-subtitle">
                                <span class="info-label">ุงูุชุฑุฌูุฉ:</span>
                                <span class="info-value" id="subtitle-display">ูุง ุชูุฌุฏ</span>
                            </div>
                            <div class="info-note">
                                <span class="note-icon">๐ก</span>
                                <span class="note-text">ูุชู ุชุฒุงูู ุงูุฌููุน ุชููุงุฆูุงู. ุนูุฏูุง ูุดุบู ุฃุญุฏ ุงูููุฏูู ุฃู ูููููุ ุณูุชุจุนู ุงูุฌููุน!</span>
                            </div>
                        </div>
                    </div>

                    <!-- Chat Section -->
                    <div class="chat-section">
                        <div class="chat-header">
                            <h3 class="chat-title">๐ฌ ุงูุดุงุช</h3>
                            <span class="chat-users-count" id="chat-users-count">
                                <span>๐ฅ</span>
                                <span id="chat-users-number">1</span>
                            </span>
                        </div>
                        
                        <div class="chat-messages" id="chat-messages">
                            <div class="chat-welcome">
                                <span class="chat-welcome-text">๐ ูุฑุญุจุงู! ุดุงุฑู ุฃููุงูู ูุน ุฃุตุฏูุงุฆู ูู ุงูููุช ุงูุญูููู</span>
                            </div>
                        </div>

                        <div class="chat-input-container">
                            <input 
                                type="text" 
                                id="chat-input" 
                                class="chat-input" 
                                placeholder="ุงูุชุจ ุฑุณุงูุชู..."
                                onkeypress="handleChatKeypress(event)"
                            >
                            <button class="btn-send" onclick="sendMessage()">
                                <span>๐ค</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <p>Watch Party - ุชุฌุฑุจุฉ ูุดุงูุฏุฉ ูุชุฒุงููุฉ</p>
            </div>
        </footer>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container"></div>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="room.js"></script>
</body>
</html>
